# 扫描技术
  扫描
  自动化
  提高效率

## 资产发现
发现目标环境中有哪些资产，联网设备，主机，服务器，各种服务等。
资产整理，发现，收集

扫描神器
  nmap
  nmap.org
  跨平台 
  kali
  如果使用kali中的nmap扫描的时候，建议桥接
  《nmap渗透测试指南》
  在没有指定端口的情况下，默认扫描top1000端口

主机发现
  有哪些主机在线，IP地址

端口扫描
  确定在线的某一个主机开启的端口
  端口上的服务
  扫描方式
    TCP 全连接扫描
    SYN 半连接扫描
    隐蔽扫描
      不适用windows系统
      Null 扫描
      Xmas 扫描
      FIN 扫描

参数
```
-sP/-sn         不进行端口扫描
-p              指定端口
  -p 80
  -p 1-80
  -p 80,3389,22
  -p 1-80,3389
  -p 1-65535
  -p-  (1-65535)
-sT             TCP全连接扫描
                建立完整三次握手过程
-sS             SYN半连接扫描
                只进行三次握手前两次
-sN             Null扫描
-sX             Xmas扫描
-sF             FIN扫描
-sV             显示服务的详细版本
-O              操作系统的类型（不太准确）
-oN/-oX/oS/oG   保存扫描结果，txt/xml/
                   xpath 自学
-A              全面扫描
-T0~-T5         时序选项
```

命令
```
nmap
nmap 127.0.0.1
man nmap
nmap 10.0.105.0/24
nmap 127.0.0.1 -p-
nmap 127.0.0.1 -p 80 -sT
nmap 127.0.0.1 -p 80 -sS
nmap 127.0.0.1 -p 80 -sX
nmap 127.0.0.1 -p 80 -sN
nmap 127.0.0.1 -p 80 -sF
nmap -sV 127.0.0.1 -p 22
nmap -p- -A 127.0.0.1 -oN result.txt
```

端口状态
  开放
  关闭
  过滤
  未过滤
  开放|过滤
  关闭|过滤


工具
  wireshark 
  ip.addr == 10.0.105.1 and tcp.port == 80

# 网络漏洞扫描

## 漏洞扫描原理

我们可以通过网络漏洞扫描，全面掌握目标服务器存在的安全漏洞。市面上常用的扫描有Nessus、NeXpose、OpenVAS等，这些扫描器都有商业版和免费版或者家庭版
网络漏洞扫描是指利用一些自动化工具发现网络上各类主机设备的安全漏洞，这些自动化工具通常称为漏洞扫描器。漏洞扫描通常可以分为两类，黑盒扫描和白盒扫描

### 黑盒扫描

黑盒扫描一般都是通过远程识别服务的类型和版本，对服务是否存在漏洞进行判定。在一些最新的漏洞扫描软件中，应用了一些更高级的技术，比如模拟渗透攻击等。

### 白盒攻击

白盒扫描就是在具有主机操作权限的情况下进行漏洞扫描，比如微软的补丁更新程序会定期对你的操作系统进行扫描，查找存在的安全漏洞，并向你推送相应的操作系统补丁。

白盒扫描的结果更加准确，但一般来说它所识别的漏洞不应当作为外部渗透测试的最终数据，因为这些漏洞由于防火墙和各类软件的原因很可能无法在外部渗透测试中得到利用。同时，在一般情况下你是没有机会获取用户名和口令。

漏洞扫描器一般会附带一个用于识别主机漏洞的特征库，并定期进行更新。在漏洞扫描的时候，就是利用特征库里的脚本与目标系统的反馈信息进行匹配，如果能够匹配上，就说明存在某一个漏洞

漏洞扫描器在识别漏洞的过程中，会向目标发送大量的数据包，有时候会导致目标系统拒绝服务或被扫描数据包阻塞，扫描行为也会被对方的入侵设备发现。

漏洞扫描器扫描出的结果通常会有很多误报（报告发现的漏洞实际并不存在）或者漏报（未报告发现漏洞但漏洞实际存在）。因此，需要对扫描结果进行人工分析，确定哪些漏洞是实际存在的，这个过程就叫做漏洞验证。这是渗透测试过程中不可缺少的一步，只有验证漏洞存在的真实性，才能对漏洞进行深度利用。

渗透测试工作中，在得到客户认可的情况下，可以使用扫描器进行扫描，但使用时一定要注意规避风险，对其系统运行可能造成的影响降到最低。

# OpenVAS

sudo openvas-start 启动

- 扫描目标
 开始进行扫描的时候需要新建一个目标
 新建目标
 填写相关信息，点击[Create]
 创建好的目标如下
- 扫描策略
 查看扫描模板，就是在扫描过程中使用的扫描策略和配置，这个扫描模板也可以自己配置
- 扫描任务
 创建好目标之后，我们创建扫描任务
 新建任务
 填写好相关信息，名称自定义。扫描目标要选择之前我们配置过的，会以下拉列表的形式展现。
 创建好的扫描目标如下
 点击开始按钮进行扫描
- 扫描完成
 扫描结束之后，显示已经完成
 点击任务状态，可以查看扫描结果
- 扫描报告
 我们可以将扫描结果以报告的形式保存下来。这里报告格式自选
 下载好的报告如下

 # Web漏洞扫描简述

随着互联网的发展以及云计算的发展，使得政府、银行、企业以及各个组织基本上都有自己的门户网站。Web应用越来越多，同时Web应用的攻击成本、难度都比较低，Web应用成为黑客攻击的主要目标。无论黑客出于什么样的目的，Web应用所面临的挑战都是很大的。
如何及时、快速发现Web应用安全漏洞，并且修补安全漏洞，减轻或消除Web安全风险成为安全行业的重要课题。
小型Web应用几十上百个页面，大型的Web应用成千上万个页面，如果只靠人工的方式去检测每个页面的安全性，显然，这个成本时难以估计的。所以，我们需要借助自动化工具，帮助审计人员去发现Web安全漏洞。这些自动化工具就是Web漏洞扫描器。
市面上Web漏洞扫描器有很多，其中以IBM公司的AppScan和商业化Web漏洞扫描器AWVS为优秀。Web漏洞扫描器大同小异

Web漏洞扫描原理
  进行Web漏洞扫描的时候，大致分为以下几个步骤：
  @ 爬行网站目录？
    asp .net php 可以
    java框架 大多不行
  @ 使用漏洞脚本扫描
  @ 保存扫描结果

# 关于漏洞
 漏洞的名称
 漏洞的风险等级
   高危|中危|低危|信息泄露

 漏洞描述
 漏洞危害
  前半部分 套话
  后半部分 自己发挥
 修复建议
  前半部分
  后半部分 结合实际情况

MSF kali集成
  metasploit framework
```
msfconsole
search ms17-010
```