# 命令注入

## 原理以及成因

程序员使用脚本语言（比如PHP）开发应用程序过程中，脚本语言开发十分快速、简洁、方便但是也伴随着一些问题，比如说速度慢，或者无法接触系统底层，如果我们开发的应用，特别是企业级的一些应用需要去调用一些外部程序(系统命令或者exe等可执行文件)。当应用需要调用一些外部程序时就会用到一些系统命令的函数。

应用再调用这些函数执行系统命令的时候，如果将用户的输入作为系统命令的参数拼接到命令行中，在没有过滤用户的输入的情况下，就会造成命令执行漏洞。
1. 用户输入进行拼接
2. 没有足够的过滤

## 漏洞危害

1. 继承Web服务器程序权限（Web用户权限），去执行系统命令
2. 继承Web服务器权限，读写文件
3. 反弹Shell
4. 控制整个网站
5. 控制整个服务器

相关函数
- system()
system()能够将字符串作为os命令执行，自带输出功能。测试代码如下：
```
<meta charset='gb2312'>
<?php

?>
```