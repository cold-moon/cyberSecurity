# 口令破解

## 口令安全威胁

- 口令安全概述

现在很多地方都以用户名（账号）和口令（密码）作为鉴权的方式，口令（密码）就意味着访问权限。口令（密码）就相当于进入家门的钥匙，当他人有一把可以进入你家的钥匙，想想你的安全、你的财务、你的隐私。例如网站后台、数据库、服务器、个人电脑、QQ、邮箱等等。

- 口令安全现状

@ 弱口令
  类似于12345、654321、admin123等这样常见的弱密码
@ 默认口令
  很多应用或者系统都存在默认口令。比如phpstudy的mysql数据库默认账密[root/root]，Tomcat管理控制台默认账密[tomact/tomcat]
@ 明文传输
  比如HTTP|FTP|TELNET等服务，在网络中传输的数据流都是明文的，包括口令认证信息等。这样的服务，有被嗅探的风险。

## 破解方式

  在线破解方式
    账密，需要认证
    用户名未知，密码未知
    用户名已知，密码未知
    用户名未知，密码已知
    hydra
```
-l 指定一个用户名
-p 指定一个密码
-P 指定密码字典
-L 指定用户名字典
-vV 显示爆破细节
-o  保存爆破结果
-f  找到正确的密码就停止爆破
-e 
  n  null
  s  same
  r  反向
-t  线程
```
  离线破解方式
    密文还原成明文

- 暴力破解

暴力破解就是利用所有可能的字符组密码，去尝试破解。这是最原始，粗暴的破解方法，根据运算能力，如果能够承受的起时间成本的话，最终一定会爆破出密码。下表是根据不同位数生成密码的空间大小。
字符集        密码位数         密码空间
[0-9]         8位             10^8=100000000
[0-9][a-z]    8位             36^8=2821109907456
[0-9][a-z]    1-8位           ??（23TB）

crunch（字典生成工具） kali集成

- 字典破解

如果能通过比较合理的条件，筛选或者过滤掉一些全字符组合的内容，就会大幅降低爆破的成本。我们把筛选出的密码组合成特定的字典。在用字典爆破密码也是可以的，但是这样做有可能会漏掉真正的密码。密码字典大致分为以下几类

@ 弱口令密码
比如12345、admin等这样的默认口令或弱口令

@ 社工定律
人们在设置密码的时候，往往为了便于记忆，密码的内容和组合会与个人信息有关，比如常见的密码组合“名字+生日”
 [zhangsan1992]
 社工字典更具针对性，准确率也比较高
 我们可以根据个人信息生成密码字典。可以使用cupp工具
 但是cupp是国外人开发的 
 ```
 apt-get update
 apt-get install cupp
 cupp -i
 leet mode 字符替换
 wc -i san\.txt  计算文件有多少行
 ```
 [zhangsan|ajest|19920701|dnsec|123]
 国内： 亦思社会工程学字典生成器 

@ 字符集字典
如果能确定密码的字符集合，也将大大降低爆破的成本
真空密码字典生成器 kali里crunch

简单介绍字典
  子域名字典
  默认账密字典
  文件路径字典
    日志文件
    Web目录
  常用变量名字典
  常用文件名字典
  弱口令字典

## windows口令破解

- windows口令远程爆破
[hydra -l administrator -P ../dic/pwd.dic 172.16.132.163 smb]

- windows账户hash破解

除了可以从远程爆破windows密码，我们还可以在本地破解windows密码。本地windows账户破解主要有两种方式。

@ 从内存中读取windows密码
我们可以使用getpass 直接从windows系统内存中读取账户密码

@ windows hash值破解
windows hash值破解一共需要两步操作。首先使用QuarksDump工具读取（导出）windows账户密码hash值，然后再使用john工具破解
```
john win2k8.hash --format=NT --wordlist=/root/dic/winPass.dic
john win2k8.hash --show --format=NT
```

## linux口令破解

linux口令破解，也分远程破解与本地破解。远程破解主要是爆破ssh服务，属于在线密码攻击。本地破解需要拿到linux的shadow文件，进行hash值破解，属于离线密码攻击

- 破解ssh服务

使用hydra攻击破解ssh服务，hydra攻击已经自动集成在kali虚拟机中。命令如下
[hydra -l root -P ../dic/pwd,dic 172.16.132.160 ssh]

- 本地shadow文件破解
可以使用john工具，破解shadow密码文件。john也是自动集成在kali中。john破解的时候也需要准备一个字典
[john shadow]

## 网络服务口令破解

